<!DOCTYPE html>
<html>
<head>
  <title>Hot Potato - 2 Player Test</title>
  <style>
    body { font-family: monospace; padding: 20px; }
    .player { border: 2px solid #333; padding: 15px; margin: 10px; display: inline-block; }
    button { padding: 10px; margin: 5px; cursor: pointer; }
    .log { background: #f0f0f0; padding: 10px; margin: 10px 0; max-height: 300px; overflow-y: auto; }
  </style>
</head>
<body>
  <h1>ü•î Hot Potato - 2 Player Test</h1>

  <!-- Player 1 -->
  <div class="player">
    <h2>Player 1 (Alice)</h2>
    <button onclick="connectPlayer1()">Connect</button>
    <button onclick="joinRoom1()">Join Room "ABC123"</button>
    <div class="log" id="log1"></div>
  </div>

  <!-- Player 2 -->
  <div class="player">
    <h2>Player 2 (Bob)</h2>
    <button onclick="connectPlayer2()">Connect</button>
    <button onclick="joinRoom2()">Join Room "ABC123"</button>
    <div class="log" id="log2"></div>
  </div>

  <script>
    let ws1, ws2;

    // Player 1 Functions
    function connectPlayer1() {
      ws1 = new WebSocket('ws://localhost:8080');
      
      ws1.onopen = () => {
        addLog(1, '‚úÖ Player 1 connected');
      };
      
      ws1.onmessage = (event) => {
        const data = JSON.parse(event.data);
        addLog(1, 'üì© Received: ' + JSON.stringify(data, null, 2));
      };
      
      ws1.onerror = (error) => {
        addLog(1, '‚ùå Error: ' + error);
      };
      
      ws1.onclose = () => {
        addLog(1, 'üîå Disconnected');
      };
    }

    function joinRoom1() {
      if (ws1 && ws1.readyState === WebSocket.OPEN) {
        ws1.send(JSON.stringify({
          type: 'JOIN_ROOM',
          roomId: 'ABC123',
          playerName: 'Alice'
        }));
        addLog(1, 'üì§ Sent JOIN_ROOM as Alice');
      } else {
        addLog(1, '‚ùå Not connected! Click Connect first.');
      }
    }

    // Player 2 Functions
    function connectPlayer2() {
      ws2 = new WebSocket('ws://localhost:8080');
      
      ws2.onopen = () => {
        addLog(2, '‚úÖ Player 2 connected');
      };
      
      ws2.onmessage = (event) => {
        const data = JSON.parse(event.data);
        addLog(2, 'üì© Received: ' + JSON.stringify(data, null, 2));
      };
      
      ws2.onerror = (error) => {
        addLog(2, '‚ùå Error: ' + error);
      };
      
      ws2.onclose = () => {
        addLog(2, 'üîå Disconnected');
      };
    }

    function joinRoom2() {
      if (ws2 && ws2.readyState === WebSocket.OPEN) {
        ws2.send(JSON.stringify({
          type: 'JOIN_ROOM',
          roomId: 'ABC123',
          playerName: 'Bob'
        }));
        addLog(2, 'üì§ Sent JOIN_ROOM as Bob');
      } else {
        addLog(2, '‚ùå Not connected! Click Connect first.');
      }
    }

    // Helper function
    function addLog(player, message) {
      const logDiv = document.getElementById('log' + player);
      const p = document.createElement('pre');
      p.textContent = new Date().toLocaleTimeString() + ' - ' + message;
      logDiv.appendChild(p);
      logDiv.scrollTop = logDiv.scrollHeight;
    }
  </script>
</body>
</html>
